"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1572],{1572:(L,U,h)=>{h.d(U,{w:()=>O});var m=h(467),d=h(4438),b=h(2860),M=h(9634),C=h(1440);let A=(()=>{var o;class n{getGamePlayersByPlayerId(e){return(0,m.A)(function*(){const{data:a,error:r}=yield C.N.from("game_players").select("*").eq("player_id",e);return r?(console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pasu:",r.message),[]):a||[]})()}}return(o=n).\u0275fac=function(e){return new(e||o)},o.\u0275prov=d.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})(),$=(()=>{var o;class n{getGoalsByGameId(e){return(0,m.A)(function*(){const{data:a,error:r}=yield C.N.from("goals").select("*").eq("game_id",e);return r?(console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed g\xf3l\u016f:",r.message),[]):a||[]})()}}return(o=n).\u0275fac=function(e){return new(e||o)},o.\u0275prov=d.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})(),f=(()=>{var o;class n{getCardsByGameId(e){return(0,m.A)(function*(){const{data:a,error:r}=yield C.N.from("cards").select("*").eq("game_id",e);return r?(console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed karet:",r.message),[]):a||[]})()}}return(o=n).\u0275fac=function(e){return new(e||o)},o.\u0275prov=d.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();var s=h(689),u=h(9939);let v=(()=>{var o;class n{getRefereeById(e){return(0,m.A)(function*(){const{data:a,error:r}=yield C.N.from("referees").select("*").eq("id",e).single();return r?(console.error(`Chyba p\u0159i na\u010d\xedt\xe1n\xed rozhod\u010d\xedho s ID ${e}:`,r.message),null):a||null})()}}return(o=n).\u0275fac=function(e){return new(e||o)},o.\u0275prov=d.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})(),I=(()=>{var o;class n{getStadiumById(e){return(0,m.A)(function*(){const{data:a,error:r}=yield C.N.from("stadiums").select("*").eq("id",e).single();return r?(console.error(`Chyba p\u0159i na\u010d\xedt\xe1n\xed stadionu s ID ${e}:`,r.message),null):a||null})()}}return(o=n).\u0275fac=function(e){return new(e||o)},o.\u0275prov=d.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})();var D=h(4721);let O=(()=>{var o;class n{constructor(e,a,r,g,w,c,R,l,i,y){this.gameRepo=e,this.teamService=a,this.gamePlayerRepo=r,this.goalRepo=g,this.cardRepo=w,this.leagueRepo=c,this.imageRepo=R,this.refereeRepo=l,this.stadiumRepo=i,this.playerRepo=y}loadGamesByDate(e,a){var r=this;return(0,m.A)(function*(){try{const g=yield r.gameRepo.getGamesByDate(a),w=yield Promise.all(g.map(function(){var R=(0,m.A)(function*(l){const{homeTeam:i,awayTeam:y}=yield r.teamService.getTeamsWithPhotos(l.home_team_id,l.away_team_id),B=e[l.league_id]||"Nezn\xe1m\xe1 liga";return{...l,homeTeam:i,awayTeam:y,leagueName:B}});return function(l){return R.apply(this,arguments)}}())),c={};for(const R of w)c[R.leagueName]||(c[R.leagueName]=[]),c[R.leagueName].push(R);for(const R in c)c[R].sort((l,i)=>new Date(l.date).getTime()-new Date(i.date).getTime());return c}catch(g){return console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pas\u016f",g),{}}})()}loadGamesWithTeams(e,a){var r=this;return(0,m.A)(function*(){try{let g;g="team"===e?yield r.gameRepo.getGamesByTeamId(a):yield r.gameRepo.getGamesByLeagueId(a);const w=yield Promise.all(g.map(function(){var l=(0,m.A)(function*(i){const{homeTeam:y,awayTeam:B}=yield r.teamService.getTeamsWithPhotos(i.home_team_id,i.away_team_id);return{...i,homeTeam:y,awayTeam:B}});return function(i){return l.apply(this,arguments)}}()));return[w.filter(l=>l.result).sort((l,i)=>i.round_number-l.round_number),w.filter(l=>!l.result)]}catch(g){return console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pas\u016f s t\xfdmy:",g),[]}})()}loadPlayersGames(e){var a=this;return(0,m.A)(function*(){try{const g=yield a.gamePlayerRepo.getGamePlayersByPlayerId(`${e}`);let w=[];for(const l of g){const i=yield a.gameRepo.getGameById(`${l.game_id}`);i&&w.push(i)}const c=w;return(yield Promise.all(c.map(function(){var l=(0,m.A)(function*(i){const y=g.find(_=>_.game_id===i.id),{homeTeam:B,awayTeam:N}=yield a.teamService.getTeamsWithPhotos(i.home_team_id,i.away_team_id),P=(yield a.goalRepo.getGoalsByGameId(`${i.id}`)).filter(_=>_.player_id===e),S=P.length,z=S>0?`${P.map(_=>`${_.minute}'`).join(", ")}`:"",W=(yield a.cardRepo.getCardsByGameId(`${i.id}`)).filter(_=>_.player_id===e),Y=W.filter(_=>"yellow"===_.type),E=W.filter(_=>"second_yellow"===_.type),K=W.filter(_=>"red"===_.type),H=Y.length>0?`${Y.map(_=>`${_.minute}'`).join(", ")}`:"",t=E.length>0?`${E.map(_=>`${_.minute}'`).join(", ")}`:"",p=K.length>0?`${K.map(_=>`${_.minute}'`).join(", ")}`:"";let T;T="starter"==(null==y?void 0:y.role)?"z\xe1kladn\xed sestava":"bench"==(null==y?void 0:y.role)?"st\u0159\xeddaj\xedc\xed hr\xe1\u010d":"mimo sestavu";const F=T,x=null==y?void 0:y.home_or_away;return{...i,homeTeam:B,awayTeam:N,role:F,homeOrAway:x,playerGoalsCount:S,playerGoalsMinutes:z,yellowCardCount:Y.length,yellowCardMinutes:H,secondYellowCardCount:E.length,secondYellowCardMinutes:t,redCardCount:K.length,redCardMinutes:p}});return function(i){return l.apply(this,arguments)}}()))).filter(l=>l.result).sort((l,i)=>i.round_number-l.round_number)}catch(r){return console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pas\u016f hr\xe1\u010de:",r),[]}})()}getGame(e){var a=this;return(0,m.A)(function*(){return yield a.gameRepo.getGameById(e)})()}loadGameDetails(e){var a=this;return(0,m.A)(function*(){try{const r=yield a.gameRepo.getGameById(e);if(!r)return void console.warn("Z\xe1pas nenalezen");const{homeTeam:g,awayTeam:w}=yield a.teamService.getTeamsWithPhotos(r.home_team_id,r.away_team_id),c=yield a.leagueRepo.getLeagueById(`${r.league_id}`),R=yield a.imageRepo.getPhotoUrl(c.photo_url);let l=null,i=null;if(r.result){const[P,S]=r.result.split("-").map(Number);l=null!==P?P:null,i=null!==S?S:null}let y=null;if(r.stadium_id){const P=yield a.stadiumRepo.getStadiumById(`${r.stadium_id}`);y=P?P.name:null}else{const P=yield a.stadiumRepo.getStadiumById(`${g.stadium_id}`);y=P?P.name:null}const B=yield a.refereeRepo.getRefereeById(`${r.referee_id}`),N=yield a.refereeRepo.getRefereeById(`${r.first_assistant_id}`),j=yield a.refereeRepo.getRefereeById(`${r.second_assistant_id}`);return{...r,homeTeam:g,awayTeam:w,league:c,leaguePhotoUrl:R,score_home:l,score_away:i,stadiumName:y,referee:B,first_ar:N,second_ar:j}}catch(r){return console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pasu s t\xfdmy:",r),[]}})()}loadGoalsAndCards(e){var a=this;return(0,m.A)(function*(){try{const r=yield a.goalRepo.getGoalsByGameId(e),g=yield a.cardRepo.getCardsByGameId(e),w=yield Promise.all(r.map(function(){var t=(0,m.A)(function*(p){const T=yield a.playerRepo.getPlayerById(p.player_id);return{...p,playerName:`${T.first_name} ${T.second_name}`,homeOrAway:p.home_or_away,player:T}});return function(p){return t.apply(this,arguments)}}())),c=yield Promise.all(g.map(function(){var t=(0,m.A)(function*(p){const T=yield a.playerRepo.getPlayerById(p.player_id);return{...p,playerName:`${T.first_name} ${T.second_name}`,homeOrAway:p.home_or_away,player:T}});return function(p){return t.apply(this,arguments)}}())),R=w.filter(t=>"home"===t.homeOrAway),l=w.filter(t=>"away"===t.homeOrAway),i=c.filter(t=>"yellow"===t.type&&"home"===t.homeOrAway),y=c.filter(t=>"yellow"===t.type&&"away"===t.homeOrAway),B=c.filter(t=>"second_yellow"===t.type&&"home"===t.homeOrAway),N=c.filter(t=>"second_yellow"===t.type&&"away"===t.homeOrAway),j=c.filter(t=>"red"===t.type&&"home"===t.homeOrAway),P=c.filter(t=>"red"===t.type&&"away"===t.homeOrAway),S=[...w].sort((t,p)=>t.minute-p.minute),z=c.filter(t=>"yellow"===t.type).sort((t,p)=>t.minute-p.minute),V=c.filter(t=>"second_yellow"===t.type).sort((t,p)=>t.minute-p.minute),W=c.filter(t=>"red"===t.type).sort((t,p)=>t.minute-p.minute),E=[...w.map(t=>({...t,type:"goal"})),...c].sort((t,p)=>t.minute-p.minute),K=E.filter(t=>t.minute<=45),H=E.filter(t=>t.minute>45);return{homeGoals:R,awayGoals:l,homeYellowCards:i,awayYellowCards:y,homeSecondYellowCards:B,awaySecondYellowCards:N,homeRedCards:j,awayRedCards:P,allGoals:S,allYellowCards:z,allSecondYellowCards:V,allRedCards:W,allEvents:E,firstHalfEvents:K,secondHalfEvents:H}}catch(r){return console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed g\xf3l\u016f a karet:",r),{homeGoals:[],awayGoals:[],homeYellowCards:[],awayYellowCards:[],homeSecondYellowCards:[],awaySecondYellowCards:[],homeRedCards:[],awayRedCards:[],allGoals:[],allYellowCards:[],allSecondYellowCards:[],allRedCards:[],allEvents:[],firstHalfEvents:[],secondHalfEvents:[]}}})()}}return(o=n).\u0275fac=function(e){return new(e||o)(d.KVO(b.D),d.KVO(M.n),d.KVO(A),d.KVO($),d.KVO(f),d.KVO(s.C),d.KVO(u.U),d.KVO(v),d.KVO(I),d.KVO(D.I))},o.\u0275prov=d.jDH({token:o,factory:o.\u0275fac,providedIn:"root"}),n})()},9634:(L,U,h)=>{h.d(U,{n:()=>C});var m=h(467),d=h(4438),b=h(7497),M=h(9939);let C=(()=>{var A;class ${constructor(s,u){this.teamRepo=s,this.imageRepo=u}getTeamsWithPhotos(s,u){var v=this;return(0,m.A)(function*(){let I=null,D=null;try{var O,o;const n=yield v.teamRepo.getTeamById(`${s}`),G=yield v.imageRepo.getPhotoUrl(null==n?void 0:n.photo_url);I={...null==n||null===(O=n.data)||void 0===O?void 0:O[0],photoUrl:G,name:null==n?void 0:n.name,id:null==n?void 0:n.id,stadium_id:null==n?void 0:n.stadium_id};const e=yield v.teamRepo.getTeamById(`${u}`),a=yield v.imageRepo.getPhotoUrl(null==e?void 0:e.photo_url);D={...null==e||null===(o=e.data)||void 0===o?void 0:o[0],photoUrl:a,name:null==e?void 0:e.name,id:null==e?void 0:e.id}}catch(n){console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed t\xfdm\u016f:",n)}return{homeTeam:I,awayTeam:D}})()}getTeam(s){var u=this;return(0,m.A)(function*(){try{const v=yield u.teamRepo.getTeamById(s),I=yield u.imageRepo.getPhotoUrl(v.photo_url);return{...v,photoUrl:I}}catch(v){throw console.error("Error fetching team with photo URL:",v),v}})()}getTeamsWithPhotoUrl(){var s=this;return(0,m.A)(function*(){const u=yield s.teamRepo.getTeams();return yield Promise.all(u.map(function(){var I=(0,m.A)(function*(D){const O=yield s.imageRepo.getPhotoUrl(D.photo_url);return{...D,photoUrl:O}});return function(D){return I.apply(this,arguments)}}()))})()}loadTeamForPlayer(s){var u=this;return(0,m.A)(function*(){try{return yield u.teamRepo.getTeamById(`${s}`)}catch(v){console.error("Error loading team:",v)}})()}}return(A=$).\u0275fac=function(s){return new(s||A)(d.KVO(b._),d.KVO(M.U))},A.\u0275prov=d.jDH({token:A,factory:A.\u0275fac,providedIn:"root"}),$})()},2860:(L,U,h)=>{h.d(U,{D:()=>M});var m=h(467),d=h(1440),b=h(4438);let M=(()=>{var C;class A{getGames(){return(0,m.A)(function*(){const{data:f,error:s}=yield d.N.from("games").select("*");return s?(console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pas\u016f:",s.message),[]):f||[]})()}getGameById(f){return(0,m.A)(function*(){const{data:s,error:u}=yield d.N.from("games").select("*").eq("id",f).single();return u?(console.error(`Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pasu s ID ${f}:`,u.message),null):s||null})()}getGamesByTeamId(f){return(0,m.A)(function*(){const{data:s,error:u}=yield d.N.from("games").select("*").or(`home_team_id.eq.${f},away_team_id.eq.${f}`);return u?(console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pasu:",u.message),[]):s||[]})()}getGamesByLeagueId(f){return(0,m.A)(function*(){const{data:s,error:u}=yield d.N.from("games").select("*").eq("league_id",f);return u?(console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pasu:",u.message),[]):s||[]})()}getGamesByIds(f){return(0,m.A)(function*(){try{const{data:s,error:u}=yield d.N.from("games").select("*").in("id",f);if(u)throw u;return s||[]}catch(s){throw console.error("Error fetching games by IDs:",s),s}})()}getGamesByDate(f){return(0,m.A)(function*(){const s=new Date(f);s.setHours(0,0,0,0);const u=new Date(f);u.setHours(23,59,59,999);const{data:v,error:I}=yield d.N.from("games").select("*").gte("date",s.toISOString()).lt("date",new Date(u.getTime()+1).toISOString());return I?(console.error("Chyba p\u0159i na\u010d\xedt\xe1n\xed z\xe1pas\u016f:",I.message),[]):v||[]})()}}return(C=A).\u0275fac=function(f){return new(f||C)},C.\u0275prov=b.jDH({token:C,factory:C.\u0275fac,providedIn:"root"}),A})()}}]);